{% extends "@c975LPayment/layout.html.twig" %}
{% trans_default_domain 'payment' %}
{% set title = 'label.payment'|trans %}

{% block payment_content %}
    <div class="alert alert-info">
{# Test #}
        {% if test != true %}
            <p class="alert alert-danger text-center">
                {{ 'text.test_keys'|trans }}
            </p>
        {% endif %}
{# Description #}
        <p class="text-center">
            <strong>{{ 'label.description'|trans }}</strong>
            <br />
            {{ payment.description }}
            <br />
            <br />
        </p>
        <div class="well text-center">
{# Explanation #}
            <p>
                {{ 'text.info_payment'|trans }}
            </p>
{# Amount #}
            <p class="lead">
                {{ (payment.amount / 100)|localizedcurrency(payment.currency) }}
            </p>
{# Button form #}
            <form action="{{ path('payment_charge') }}" method="POST">
                <script
                    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                    data-key="{{ key }}"
                    data-amount="{{ payment.amount }}"
                    data-currency="{{ payment.currency }}"
                    data-name="{{ site }}"
                    data-description="{{ payment.description }}"
                    data-locale="auto"
                    data-label="{{ 'label.payment_by_card'|trans }}"
                    data-zip-code="{{ zipCode }}"
                    data-alipay="false"
                    {% if image != null %}
                        data-image="{{ asset(image) }}"
                    {% endif %}
                ></script>
            </form>
        </div>
{# Not storing banking information #}
        <p class="text-center">
            <strong>
                {{ 'text.not_store_banking'|trans }}
            </strong>
        </p>
{# Payment system #}
        {{ payment_system()|raw }}
    </div>
{# Secured page #}
    <p class="text-center text-muted">
        {{ 'text.secured_page'|trans|raw }}
    </p>
{% endblock %}